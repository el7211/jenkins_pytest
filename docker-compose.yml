services:
  pytest-runner:
    env_file:
      - .env
    image: python:3.11
    container_name: test-runner
    volumes:
       - .:/app
    working_dir: /app
    command: >
      bash -c "
        echo 'ğŸ“‚ Listing /app contents...' &&
        ls /app &&
        echo 'ğŸ“„ Checking requirements.txt...' &&
        file /app/requirements.txt &&
        pip install -r /app/requirements.txt &&
        echo 'ğŸ§ª Running pytest...' &&
        pytest -s /app/tests &&
        tail -f /dev/null"
